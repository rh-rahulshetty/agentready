# HTML Report Structure Specification

**Purpose**: Define the structure, interactivity, and requirements for self-contained HTML reports generated by agentready

**Format**: Single HTML file with embedded CSS and JavaScript (no external dependencies)

**Filename**: `report-{timestamp}.html` (e.g., `report-2025-11-20T14-30-00.html`)

## Document Structure

### Overall HTML Skeleton

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentReady Assessment Report - {repository_name}</title>
    <style>
        /* ALL CSS EMBEDDED HERE (no external stylesheets) */
    </style>
</head>
<body>
    <div id="app">
        <!-- Report content here -->
    </div>

    <script>
        /* ALL JAVASCRIPT EMBEDDED HERE (no external scripts) */
        const ASSESSMENT_DATA = {JSON_DATA_HERE};
    </script>
</body>
</html>
```

## Required Sections

### 1. Header (Fixed Position)

```html
<header class="report-header">
    <div class="container">
        <h1>AgentReady Assessment Report</h1>
        <div class="repo-info">
            <span class="repo-name">{repository_name}</span>
            <span class="repo-path">{repository_path}</span>
        </div>
        <div class="score-display">
            <div class="score-circle" data-score="{overall_score}">
                <span class="score-number">{overall_score}</span>
                <span class="score-label">/100</span>
            </div>
            <div class="certification-badge {certification_class}">
                <span class="cert-emoji">{cert_emoji}</span>
                <span class="cert-name">{certification_level}</span>
            </div>
        </div>
        <div class="metadata">
            <span>üìÖ {timestamp}</span>
            <span>‚úÖ {assessed} assessed</span>
            <span>‚è≠Ô∏è {skipped} skipped</span>
            <span>‚è±Ô∏è {duration}s</span>
        </div>
    </div>
</header>
```

**Requirements**:
- Fixed position header (stays visible on scroll)
- Circular score display with dynamic color (red <40, yellow 40-74, green 75-100)
- Certification badge with appropriate emoji
- Metadata row with assessment stats

---

### 2. Controls/Filters (Sticky Below Header)

```html
<div class="controls-bar">
    <div class="container">
        <div class="filters">
            <button class="filter-btn active" data-filter="all">
                All ({total_attributes})
            </button>
            <button class="filter-btn" data-filter="pass">
                ‚úÖ Passing ({pass_count})
            </button>
            <button class="filter-btn" data-filter="fail">
                ‚ùå Failing ({fail_count})
            </button>
            <button class="filter-btn" data-filter="skipped">
                ‚è≠Ô∏è Skipped ({skipped_count})
            </button>
        </div>
        <div class="sort-controls">
            <label>Sort by:</label>
            <select id="sort-selector">
                <option value="category">Category</option>
                <option value="score-asc">Score (Low to High)</option>
                <option value="score-desc">Score (High to Low)</option>
                <option value="tier">Tier (Priority)</option>
            </select>
        </div>
        <div class="search">
            <input type="text" id="search-box" placeholder="Search attributes...">
        </div>
    </div>
</div>
```

**Requirements**:
- Sticky positioning (fixed below header)
- Filter buttons toggle attribute visibility
- Active filter highlighted
- Sort dropdown changes attribute display order
- Search box filters attributes by name/description (case-insensitive)
- Count badges update dynamically

---

### 3. Summary Dashboard

```html
<section class="summary-dashboard">
    <div class="container">
        <h2>Summary</h2>
        <div class="category-grid">
            <!-- One card per category -->
            <div class="category-card" data-category="{category_id}">
                <h3 class="category-name">{category_name}</h3>
                <div class="category-score">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {score}%"></div>
                    </div>
                    <span class="score-text">{score}%</span>
                </div>
                <div class="category-stats">
                    <span>{assessed}/{total} attributes</span>
                    <span class="status-badge {status_class}">{status_text}</span>
                </div>
            </div>
        </div>
    </div>
</section>
```

**Requirements**:
- Grid layout (responsive: 1 column mobile, 2 tablet, 3 desktop)
- Each category card shows score, progress bar, attribute count
- Click category card to scroll to detailed findings
- Status badges color-coded (green/yellow/red)

---

### 4. Detailed Findings (Collapsible Sections)

```html
<section class="detailed-findings">
    <div class="container">
        <h2>Detailed Findings</h2>

        <!-- Category Section -->
        <div class="category-section" data-category="{category_id}">
            <h3 class="category-header">
                <span class="category-number">{number}</span>
                <span class="category-title">{category_name}</span>
                <span class="category-badge">{score}%</span>
            </h3>

            <!-- Attribute Findings -->
            <div class="attribute-findings">
                <details class="finding-card" data-status="{status}" data-tier="{tier}" data-attribute-id="{id}">
                    <summary class="finding-summary">
                        <div class="summary-left">
                            <span class="status-icon">{status_emoji}</span>
                            <span class="attribute-id">{number}</span>
                            <span class="attribute-name">{name}</span>
                            <span class="tier-badge">Tier {tier}</span>
                        </div>
                        <div class="summary-right">
                            <span class="score-badge">{score}/100</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                    </summary>

                    <div class="finding-details">
                        <div class="measurement">
                            <strong>Measured:</strong> {measured_value}
                            <br>
                            <strong>Threshold:</strong> {threshold}
                        </div>

                        <div class="evidence">
                            <strong>Evidence:</strong>
                            <ul>
                                <!-- Evidence items with icons -->
                                <li><span class="evidence-icon">‚úÖ</span> {evidence_item}</li>
                            </ul>
                        </div>

                        <!-- Remediation (only for failing attributes) -->
                        <div class="remediation">
                            <h4>üîß Remediation Steps</h4>
                            <p class="remediation-summary">{summary}</p>
                            <ol class="remediation-steps">
                                <li>{step}</li>
                            </ol>
                            <div class="remediation-tools">
                                <strong>Tools:</strong> {tools_list}
                            </div>
                            <div class="remediation-commands">
                                <strong>Commands:</strong>
                                <pre><code>{commands}</code></pre>
                            </div>
                            <div class="citations">
                                <strong>References:</strong>
                                <ul>
                                    <li><a href="{url}" target="_blank">{source}: {title}</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
        </div>
    </div>
</section>
```

**Requirements**:
- `<details>` / `<summary>` for native collapsible behavior
- Attribute cards sortable and filterable via JavaScript
- Status icons: ‚úÖ pass, ‚ùå fail, ‚è≠Ô∏è skipped, ‚ö†Ô∏è error, ‚ÑπÔ∏è not_applicable
- Tier badges color-coded (1=red, 2=orange, 3=yellow, 4=green)
- Remediation section only shown for failing attributes
- Code blocks with syntax highlighting (CSS-based, not JS library)
- External links open in new tab (`target="_blank"`)

---

### 5. Certification Explanation

```html
<section class="certification-info">
    <div class="container">
        <h2>Certification Level: <span class="cert-name">{certification_level}</span></h2>
        <p class="cert-description">{description}</p>

        <div class="score-ladder">
            <div class="score-tier" data-tier="platinum">
                <span class="tier-emoji">ü•á</span>
                <strong>Platinum</strong>
                <span class="tier-range">90-100</span>
                <span class="tier-desc">Exemplary</span>
            </div>
            <div class="score-tier" data-tier="gold">
                <span class="tier-emoji">ü•á</span>
                <strong>Gold</strong>
                <span class="tier-range">75-89</span>
                <span class="tier-desc">Highly Optimized</span>
            </div>
            <div class="score-tier active" data-tier="silver">
                <span class="tier-emoji">ü•à</span>
                <strong>Silver</strong>
                <span class="tier-range">60-74</span>
                <span class="tier-desc">Well-Suited (YOUR LEVEL)</span>
            </div>
            <div class="score-tier" data-tier="bronze">
                <span class="tier-emoji">ü•â</span>
                <strong>Bronze</strong>
                <span class="tier-range">40-59</span>
                <span class="tier-desc">Basic Compatibility</span>
            </div>
            <div class="score-tier" data-tier="needs-improvement">
                <span class="tier-emoji">‚õî</span>
                <strong>Needs Improvement</strong>
                <span class="tier-range">0-39</span>
                <span class="tier-desc">Significant Work Needed</span>
            </div>
        </div>

        <div class="next-steps">
            <h3>Next Steps to {next_tier}</h3>
            <ul class="improvement-list">
                <li>
                    <span class="improvement-points">+{points}</span>
                    <span class="improvement-desc">{description}</span>
                    <a href="#{attribute_id}" class="jump-link">View Details ‚Üí</a>
                </li>
            </ul>
        </div>
    </div>
</section>
```

**Requirements**:
- Visual score ladder with current level highlighted
- Next steps show top 3-5 improvements ranked by point potential
- Jump links scroll to specific attribute findings
- Active tier has distinct styling (border, background)

---

### 6. Footer

```html
<footer class="report-footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Assessment Metadata</h4>
                <p><strong>Generated by:</strong> agentready v{version}</p>
                <p><strong>Research Report:</strong> v{research_version} ({research_date})</p>
                <p><strong>Duration:</strong> {minutes}m {seconds}s</p>
            </div>
            <div class="footer-section">
                <h4>Repository Snapshot</h4>
                <p><strong>Branch:</strong> {branch}</p>
                <p><strong>Commit:</strong> {commit_hash_short}</p>
                <p><strong>Languages:</strong> {languages_list}</p>
                <p><strong>Files:</strong> {total_files} | <strong>Lines:</strong> {total_lines}</p>
            </div>
            <div class="footer-section">
                <h4>Research Foundation</h4>
                <p>Based on evidence from 50+ authoritative sources including Anthropic, Microsoft, Google, ArXiv, and IEEE/ACM.</p>
                <p><a href="https://github.com/your-org/agentready" target="_blank">AgentReady Project</a></p>
            </div>
        </div>
        <div class="footer-attribution">
            <p><em>AgentReady - Optimizing codebases for AI-assisted development</em></p>
        </div>
    </div>
</footer>
```

---

## JavaScript Functionality

### Required Interactive Features

1. **Filtering**
```javascript
// Filter attribute cards by status
function filterByStatus(status) {
    const cards = document.querySelectorAll('.finding-card');
    cards.forEach(card => {
        if (status === 'all' || card.dataset.status === status) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
    updateFilterCounts();
}
```

2. **Sorting**
```javascript
// Sort attributes by criteria
function sortAttributes(criteria) {
    const container = document.querySelector('.attribute-findings');
    const cards = Array.from(container.querySelectorAll('.finding-card'));

    cards.sort((a, b) => {
        if (criteria === 'score-asc') {
            return getScore(a) - getScore(b);
        } else if (criteria === 'score-desc') {
            return getScore(b) - getScore(a);
        } else if (criteria === 'tier') {
            return parseInt(a.dataset.tier) - parseInt(b.dataset.tier);
        }
        // Default: category order (no change)
        return 0;
    });

    cards.forEach(card => container.appendChild(card));
}
```

3. **Search**
```javascript
// Search attributes by text
function searchAttributes(query) {
    const lowercaseQuery = query.toLowerCase();
    const cards = document.querySelectorAll('.finding-card');

    cards.forEach(card => {
        const name = card.querySelector('.attribute-name').textContent.toLowerCase();
        const desc = card.querySelector('.finding-details').textContent.toLowerCase();

        if (name.includes(lowercaseQuery) || desc.includes(lowercaseQuery)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}
```

4. **Smooth Scrolling**
```javascript
// Smooth scroll to category section
function scrollToCategory(categoryId) {
    const section = document.querySelector(`[data-category="${categoryId}"]`);
    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
}
```

5. **Dynamic Progress Circles**
```javascript
// Animate score circle on page load
function animateScoreCircle(element, targetScore) {
    let currentScore = 0;
    const duration = 1000; // 1 second
    const increment = targetScore / (duration / 16); // 60 FPS

    const interval = setInterval(() => {
        currentScore += increment;
        if (currentScore >= targetScore) {
            currentScore = targetScore;
            clearInterval(interval);
        }
        updateCircle(element, currentScore);
    }, 16);
}
```

---

## CSS Requirements

### Responsive Breakpoints
```css
/* Mobile-first approach */
@media (min-width: 768px) { /* Tablet */ }
@media (min-width: 1024px) { /* Desktop */ }
```

### Color Scheme
```css
:root {
    /* Certification colors */
    --platinum: #E5E4E2;
    --gold: #FFD700;
    --silver: #C0C0C0;
    --bronze: #CD7F32;
    --needs-improvement: #D32F2F;

    /* Status colors */
    --pass: #4CAF50;
    --fail: #F44336;
    --warning: #FF9800;
    --info: #2196F3;
    --skipped: #9E9E9E;

    /* Tier colors */
    --tier-1: #D32F2F; /* Red - Essential */
    --tier-2: #FF6F00; /* Orange - Critical */
    --tier-3: #FBC02D; /* Yellow - Important */
    --tier-4: #388E3C; /* Green - Advanced */

    /* UI colors */
    --background: #FAFAFA;
    --surface: #FFFFFF;
    --text-primary: #212121;
    --text-secondary: #757575;
    --border: #E0E0E0;
}
```

### Typography
```css
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-size: 16px;
    line-height: 1.6;
}

code, pre {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
}
```

---

## File Size Requirements

- **Maximum**: 5MB (including embedded CSS/JS)
- **Target**: <2MB for typical reports
- **CSS Minification**: Required
- **JS Minification**: Required
- **Image Embedding**: None (use Unicode emoji only)

---

## Validation Checklist

- [ ] Single HTML file with no external dependencies
- [ ] All CSS embedded in `<style>` tag
- [ ] All JavaScript embedded in `<script>` tag
- [ ] Assessment data embedded as JSON constant
- [ ] Works offline (no CDN, no external resources)
- [ ] Responsive design (mobile, tablet, desktop)
- [ ] All interactive features functional (filter, sort, search)
- [ ] Smooth scroll behavior implemented
- [ ] Collapsible sections work (native `<details>` element)
- [ ] Progress bars animated on page load
- [ ] Score circle updates dynamically
- [ ] Color-coded status indicators throughout
- [ ] All links to external sites have `target="_blank"`
- [ ] Cross-browser compatible (Chrome, Firefox, Safari, Edge)
- [ ] Accessible (keyboard navigation, ARIA labels)
- [ ] Print-friendly (CSS print stylesheet)
